version: 1
service: cove

image:
  name: cove
  build:
    context: .
    dockerfile: Dockerfile
    args:
      - GOFLAGS=-trimpath

run:
  command: []
  ports:
    - name: inbound
      container_port: 2100
      public: false
  volumes:
    - name: vault
      mount_path: /app/vault
      type: persistant
      size: 1Gi
  env:
    - LOG_LEVEL=INFO
  env_from_cove:
  resources:
    cpu: "0.5"
    memory: "512Mi"

deploy:
  strategy: blue_green
  restart: unless-stopped
  labels:
    manged-by: lighthouse

